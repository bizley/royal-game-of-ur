(this["webpackJsonproyal-game-of-ur"]=this["webpackJsonproyal-game-of-ur"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(3),c=n.n(l),u=(n(14),n(15),n(1)),i=function(e,t){return{type:"ADD_PAWN",player:e,spot:t}},s=function(e,t){return{type:"CHANGE_STATE",player:e,state:t}},o=function(e,t){return{type:"REMOVE_PAWN",player:e,field:t}},E=function(e,t){return{type:"INFO",player:e,info:t}},m={blue:{saved:0,inGame:7,info:"",state:"AWAITS_ROLL",moves:[],pawns:[]},green:{saved:0,inGame:7,info:"",state:"AWAITS_ROLL",moves:[],pawns:[]}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n={};switch(t.type){case"ADD_PAWN":return n[t.player]=e[t.player],n[t.player].pawns.push(t.spot),Object.assign({},e,n);case"SAVE":return n[t.player]=e[t.player],n[t.player].saved=e[t.player].saved+1,n[t.player].inGame=e[t.player].inGame-1,Object.assign({},e,n);case"CHANGE_STATE":return n[t.player]=e[t.player],n[t.player].state=t.state,Object.assign({},e,n);case"AVAILABLE_MOVES":return n[t.player]=e[t.player],n[t.player].moves=t.moves,Object.assign({},e,n);case"MOVE_PAWN":n[t.player]=e[t.player];var a=[];return e[t.player].pawns.forEach((function(e){e!==t.from&&a.push(e)})),a.push(t.to),n[t.player].pawns=a,Object.assign({},e,n);case"REMOVE_PAWN":n[t.player]=e[t.player];var r=[];return e[t.player].pawns.forEach((function(e){e!==t.field&&r.push(e)})),n[t.player].pawns=r,Object.assign({},e,n);case"INFO":return n[t.player]=e[t.player],n[t.player].info=t.info,Object.assign({},e,n);case"RESET":return{blue:{saved:0,inGame:7,info:"",state:"AWAITS_ROLL",moves:[],pawns:[]},green:{saved:0,inGame:7,info:"",state:"AWAITS_ROLL",moves:[],pawns:[]}};default:return e}},f=function(e){return e.map((function(e){return g(e)}))},d=function(e,t,n,a){var r=f(n[a].pawns),l=f(n["blue"===a?"green":"blue"].pawns),c=[];n[a].inGame>n[a].pawns.length&&r.push(0),r.forEach((function(e){var n=e+t;n<=15&&(r.includes(n)||(8!==n||8===n&&!l.includes(8))&&c.push({field:e,target:n}))})),0===c.length?(e(E(a,"No Moves Available")),e(s(a,"AWAITS_ROLL")),L(e,a)):(e(s(a,"SELECTS_PAWN")),e({type:"AVAILABLE_MOVES",player:a,moves:c}))};var y=function(){var e=Object(u.c)((function(e){return e.roll})),t=Object(u.c)((function(e){return e.current})),n=Object(u.c)((function(e){return e.players})),a=Object(u.b)();return r.a.createElement("div",null,null===e?r.a.createElement("button",{onClick:function(){return function(e,t,n){var a=Math.floor(5*Math.random());e({type:"ROLL",value:a}),0===a?(e(E(n,"Losing Turn")),L(e,n)):0===t[n].pawns.length?(e(i(n,h(a,n))),4===a?(e(E(n,"Extra Turn")),e({type:"RESET_ROLL"})):L(e,n)):d(e,a,t,n)}(a,n,t)}},"ROLL"):"",r.a.createElement("h1",{className:"roll"},e))};var b=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.player+" pawn"},"\xa0"))};var v=function(e){var t=Object(u.b)(),n=Object(u.c)((function(e){return e.players})),a=Object(u.c)((function(e){return e.current})),l=n[a].state,c=n[a].moves,m=c.map((function(e){return e.field})),p="blue"===a?"startBlue":"startGreen",f=null;e.content||Object.keys(n).forEach((function(t){if(n[t].pawns.find((function(t){return t===e.id})))return f=t,!1}));var d="",y=e.css,v=null,O=null;if(e.content)d=e.content,"SELECTS_PAWN"===l&&m.includes(0)&&e.id===p&&(y+=" available",O=c.find((function(e){return 0===e.field})),v=function(){return function(e,t,n){e(s(t,"AWAITS_ROLL")),e(i(t,h(n,t))),4===n?(e(E(t,"Extra Turn")),e({type:"RESET_ROLL"})):L(e,t)}(t,a,O.target)});else if(f){d=r.a.createElement(b,{player:f});var _=g(e.id);"SELECTS_PAWN"===l&&m.includes(_)&&e.id===h(_,a)&&(y+=" available",O=c.find((function(t){return t.field===g(e.id)})),v=function(){return function(e,t,n,a,r){if(e(s(n,"AWAITS_ROLL")),15===r)e(o(n,a)),e(function(e){return{type:"SAVE",player:e}}(n)),7===t[n].saved?window.confirm(n.toUpperCase()+" WINS!\nWould you like to start another game?")&&A(e,n):(e(E(n,"Pawn Saved")),L(e,n));else{var l="blue"===n?"green":"blue";t[l].pawns.includes(h(r,n))&&(e(o(l,h(r,n))),e(E(n,"Pawn Beaten"))),e(function(e,t,n){return{type:"MOVE_PAWN",player:e,from:t,to:n}}(n,a,h(r,n))),[4,8,13].includes(r)?(e(E(n,"Extra Turn")),e({type:"RESET_ROLL"})):L(e,n)}}(t,n,a,e.id,O.target)})}return r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:y,id:e.id,onClick:v},d))},g=function(e){return Math.abs(parseInt(e.substring(1)))},h=function(e,t){return(e<5||e>12)&&(e="blue"===t?e:-e),"c"+e},O=function(e){return"blue"===e?"green":"blue"},L=function(e,t){e({type:"SWITCH_PLAYER"}),e(E(O(t),"")),e({type:"RESET_ROLL"})},A=function(e,t){e({type:"RESET"}),e(E(t,"")),e(E(O(t),"")),e({type:"RESET_ROLL"})};var _=function(){var e=Object(u.c)((function(e){return e.current})),t=Object(u.c)((function(e){return e.players}));return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"score"+("blue"===e?" current":""),rowSpan:"8"},r.a.createElement("h1",null,"BLUE"),r.a.createElement("h2",null,"IN GAME: ",t.blue.inGame),r.a.createElement("h2",null,"SAVED: ",t.blue.saved),"blue"===e?r.a.createElement(y,null):"",r.a.createElement("h3",null,t.blue.info)),r.a.createElement(v,{css:"blue extra",id:"c4"}),r.a.createElement(v,{id:"c5"}),r.a.createElement(v,{css:"green extra",id:"c-4"}),r.a.createElement("td",{className:"score"+("green"===e?" current":""),rowSpan:"8"},r.a.createElement("h1",null,"GREEN"),r.a.createElement("h2",null,"IN GAME: ",t.green.inGame),r.a.createElement("h2",null,"SAVED: ",t.green.saved),"green"===e?r.a.createElement(y,null):"",r.a.createElement("h3",null,t.green.info))),r.a.createElement("tr",null,r.a.createElement(v,{css:"blue",id:"c3"}),r.a.createElement(v,{id:"c6"}),r.a.createElement(v,{css:"green",id:"c-3"})),r.a.createElement("tr",null,r.a.createElement(v,{css:"blue",id:"c2"}),r.a.createElement(v,{id:"c7"}),r.a.createElement(v,{css:"green",id:"c-2"})),r.a.createElement("tr",null,r.a.createElement(v,{css:"blue",id:"c1"}),r.a.createElement(v,{css:"extra",id:"c8"}),r.a.createElement(v,{css:"green",id:"c-1"})),r.a.createElement("tr",null,r.a.createElement(v,{css:"empty",content:"\u2191",id:"startBlue"}),r.a.createElement(v,{id:"c9"}),r.a.createElement(v,{css:"empty",content:"\u2191",id:"startGreen"})),r.a.createElement("tr",null,r.a.createElement(v,{css:"empty"}),r.a.createElement(v,{id:"c10"}),r.a.createElement(v,{css:"empty"})),r.a.createElement("tr",null,r.a.createElement(v,{css:"blue",id:"c14"}),r.a.createElement(v,{id:"c11"}),r.a.createElement(v,{css:"green",id:"c-14"})),r.a.createElement("tr",null,r.a.createElement(v,{css:"blue extra",id:"c13"}),r.a.createElement(v,{id:"c12"}),r.a.createElement(v,{css:"green extra",id:"c-13"})))),r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Royal_Game_of_Ur",target:"_blank"},"Royal Game of Ur at Wiki"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=n(2),w=Math.floor(2*Math.random())?"blue":"green",R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWITCH_PLAYER":return"blue"===e?"green":"blue";default:return e}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ROLL":return t.value;case"RESET_ROLL":return null;default:return e}},N=Object(S.b)({players:p,current:R,roll:T}),W=Object(S.c)(N,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:W},r.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(22)}},[[9,1,2]]]);
//# sourceMappingURL=main.b3f5ea01.chunk.js.map