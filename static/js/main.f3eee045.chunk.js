(this["webpackJsonproyal-game-of-ur"]=this["webpackJsonproyal-game-of-ur"]||[]).push([[0],{14:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(3),c=n.n(l),u=(n(14),n(1)),i=function(e,t){return{type:"ADD_PAWN",player:e,spot:t}},s=function(e,t){return{type:"CHANGE_STATE",player:e,state:t}},o=function(e,t){return{type:"REMOVE_PAWN",player:e,field:t}},p=function(e,t){return{type:"INFO",player:e,info:t}},E=function(e,t){return{type:"LIGHT_ON",player:e,target:t}},m={blue:{saved:0,inGame:0,spare:7,info:"",state:"AWAITS_ROLL",moves:[],pawns:[]},green:{saved:0,inGame:0,spare:7,info:"",state:"AWAITS_ROLL",moves:[],pawns:[]}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n={};switch(t.type){case"ADD_PAWN":return n[t.player]=e[t.player],n[t.player].pawns.push(t.spot),n[t.player].spare=e[t.player].spare-1,n[t.player].inGame=e[t.player].inGame+1,Object.assign({},e,n);case"SAVE":return n[t.player]=e[t.player],n[t.player].saved=e[t.player].saved+1,Object.assign({},e,n);case"CHANGE_STATE":return n[t.player]=e[t.player],n[t.player].state=t.state,Object.assign({},e,n);case"AVAILABLE_MOVES":return n[t.player]=e[t.player],n[t.player].moves=t.moves,Object.assign({},e,n);case"MOVE_PAWN":n[t.player]=e[t.player];var a=[];return e[t.player].pawns.forEach((function(e){e!==t.from&&a.push(e)})),a.push(t.to),n[t.player].pawns=a,Object.assign({},e,n);case"REMOVE_PAWN":n[t.player]=e[t.player];var r=[];return e[t.player].pawns.forEach((function(e){e!==t.field&&r.push(e)})),n[t.player].pawns=r,n[t.player].inGame=e[t.player].inGame-1,n[t.player].spare=e[t.player].spare+1,Object.assign({},e,n);case"INFO":return n[t.player]=e[t.player],n[t.player].info=t.info,Object.assign({},e,n);case"RESET":return{blue:{saved:0,inGame:0,spare:7,info:"",state:"AWAITS_ROLL",moves:[],pawns:[]},green:{saved:0,inGame:0,spare:7,info:"",state:"AWAITS_ROLL",moves:[],pawns:[]}};default:return e}},d=function(e){return e.map((function(e){return v(e)}))},y=function(e,t,n,a){var r=d(n[a].pawns),l=d(n["blue"===a?"green":"blue"].pawns),c=[];n[a].spare>n[a].pawns.length&&r.push(0),r.forEach((function(e){var n=e+t;n<=15&&(r.includes(n)||(8!==n||8===n&&!l.includes(8))&&c.push({field:e,target:n}))})),0===c.length?(e(p(a,"No Moves Available")),e(s(a,"AWAITS_ROLL")),A(e,a)):(e(s(a,"SELECTS_PAWN")),e({type:"AVAILABLE_MOVES",player:a,moves:c}))};var g=function(){var e=Object(u.c)((function(e){return e.roll})),t=Object(u.c)((function(e){return e.current})),n=Object(u.c)((function(e){return e.players})),a=Object(u.b)();return r.a.createElement("div",null,null===e?r.a.createElement("button",{onClick:function(){return function(e,t,n){var a=Math.floor(2*Math.random())+Math.floor(2*Math.random())+Math.floor(2*Math.random())+Math.floor(2*Math.random());e({type:"ROLL",value:a}),0===a?(e(p(n,"Rolled 0|Losing Turn")),A(e,n)):0===t[n].pawns.length?(e(i(n,O(a,n))),4===a?(e(p(n,"Special Field|Extra Turn")),e({type:"RESET_ROLL"})):A(e,n)):y(e,a,t,n)}(a,n,t)}},"ROLL"):"",r.a.createElement("h1",{className:"roll"},e))};var h=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.player+" pawn"},"\xa0"))};var b=function(e){var t=Object(u.b)(),n=Object(u.c)((function(e){return e.players})),a=Object(u.c)((function(e){return e.current})),l=Object(u.c)((function(e){return e.light})),c=n[a].state,m=n[a].moves,f=m.map((function(e){return e.field})),d="blue"===a?"startBlue":"startGreen",y=null;e.content||Object.keys(n).forEach((function(t){if(n[t].pawns.find((function(t){return t===e.id})))return y=t,!1}));var g="",b=e.css,L=null,w=null,_=null;if(e.content)g=e.content,"SELECTS_PAWN"===c&&f.includes(0)&&e.id===d&&(b+=" available",_=m.find((function(e){return 0===e.field})),L=function(){return function(e,t,n){e(s(t,"AWAITS_ROLL")),e(i(t,O(n,t))),4===n?(e(p(t,"Special Field|Extra Turn")),e({type:"RESET_ROLL"})):A(e,t)}(t,a,_.target)},w=function(){return t(E(a,_.target))});else if(y){g=r.a.createElement(h,{player:y});var R=v(e.id);"SELECTS_PAWN"===c&&f.includes(R)&&e.id===O(R,a)&&(b+=" available",_=m.find((function(t){return t.field===v(e.id)})),L=function(){return function(e,t,n,a,r){if(e(s(n,"AWAITS_ROLL")),15===r)e(o(n,a)),e(function(e){return{type:"SAVE",player:e}}(n)),7===t[n].saved?window.confirm(n.toUpperCase()+" WINS!\nWould you like to start another game?")&&S(e,n):(e(p(n,"Pawn Saved")),A(e,n));else{var l="blue"===n?"green":"blue";t[l].pawns.includes(O(r,n))&&(e(o(l,O(r,n))),e(p(n,"Pawn Beaten"))),e(function(e,t,n){return{type:"MOVE_PAWN",player:e,from:t,to:n}}(n,a,O(r,n))),[4,8,13].includes(r)?(e(p(n,"Special Field|Extra Turn")),e({type:"RESET_ROLL"})):A(e,n)}}(t,n,a,e.id,_.target)},w=function(){return t(E(a,_.target))}),l&&O(l.target,l.player)===e.id&&y!==a&&(b+=" conflict")}else l&&O(l.target,l.player)===e.id&&(b+=" target");return r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:b,id:e.id,onClick:L,onMouseOver:w,onMouseOut:function(){return t({type:"LIGHT_OFF"})}},g))},v=function(e){return Math.abs(parseInt(e.substring(1)))},O=function(e,t){return(e<5||e>12)&&(e="blue"===t?e:-e),"c"+e},L=function(e){return"blue"===e?"green":"blue"},A=function(e,t){e({type:"SWITCH_PLAYER"}),e(p(L(t),"")),e({type:"RESET_ROLL"})},S=function(e,t){e({type:"RESET"}),e(p(t,"")),e(p(L(t),"")),e({type:"RESET_ROLL"})};var w=function(){var e=Object(u.c)((function(e){return e.current})),t=Object(u.c)((function(e){return e.players}));return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"score"+("blue"===e?" current":""),rowSpan:"8"},r.a.createElement("h1",null,"BLUE"),r.a.createElement("h2",null,"SPARE: ",t.blue.spare),r.a.createElement("h2",null,"IN GAME: ",t.blue.inGame),r.a.createElement("h2",null,"SAVED: ",t.blue.saved),"blue"===e?r.a.createElement(g,null):"",r.a.createElement("h3",null,t.blue.info.split("|").map((function(e,t){return r.a.createElement(a.Fragment,{key:t},e,r.a.createElement("br",null))})))),r.a.createElement(b,{css:"blue extra",id:"c4"}),r.a.createElement(b,{id:"c5"}),r.a.createElement(b,{css:"green extra",id:"c-4"}),r.a.createElement("td",{className:"score"+("green"===e?" current":""),rowSpan:"8"},r.a.createElement("h1",null,"GREEN"),r.a.createElement("h2",null,"SPARE: ",t.green.spare),r.a.createElement("h2",null,"IN GAME: ",t.green.inGame),r.a.createElement("h2",null,"SAVED: ",t.green.saved),"green"===e?r.a.createElement(g,null):"",r.a.createElement("h3",null,t.green.info.split("|").map((function(e,t){return r.a.createElement(a.Fragment,{key:t},e,r.a.createElement("br",null))}))))),r.a.createElement("tr",null,r.a.createElement(b,{css:"blue",id:"c3"}),r.a.createElement(b,{id:"c6"}),r.a.createElement(b,{css:"green",id:"c-3"})),r.a.createElement("tr",null,r.a.createElement(b,{css:"blue",id:"c2"}),r.a.createElement(b,{id:"c7"}),r.a.createElement(b,{css:"green",id:"c-2"})),r.a.createElement("tr",null,r.a.createElement(b,{css:"blue",id:"c1"}),r.a.createElement(b,{css:"extra",id:"c8"}),r.a.createElement(b,{css:"green",id:"c-1"})),r.a.createElement("tr",null,r.a.createElement(b,{css:"empty",content:"\u2191",id:"startBlue"}),r.a.createElement(b,{id:"c9"}),r.a.createElement(b,{css:"empty",content:"\u2191",id:"startGreen"})),r.a.createElement("tr",null,r.a.createElement(b,{css:"empty",id:"c15"}),r.a.createElement(b,{id:"c10"}),r.a.createElement(b,{css:"empty",id:"c-15"})),r.a.createElement("tr",null,r.a.createElement(b,{css:"blue",id:"c14"}),r.a.createElement(b,{id:"c11"}),r.a.createElement(b,{css:"green",id:"c-14"})),r.a.createElement("tr",null,r.a.createElement(b,{css:"blue extra",id:"c13"}),r.a.createElement(b,{id:"c12"}),r.a.createElement(b,{css:"green extra",id:"c-13"})))),r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Royal_Game_of_Ur",target:"_blank",rel:"noopener noreferrer"},"Royal Game of Ur at Wiki"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=n(2),R=Math.floor(2*Math.random())?"blue":"green",T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWITCH_PLAYER":return"blue"===e?"green":"blue";default:return e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ROLL":return t.value;case"RESET_ROLL":return null;default:return e}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIGHT_ON":return{player:t.player,target:t.target};case"LIGHT_OFF":return null;default:return e}},M=Object(_.b)({players:f,current:T,roll:N,light:G}),W=Object(_.c)(M);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:W},r.a.createElement(w,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(21)}},[[9,1,2]]]);
//# sourceMappingURL=main.f3eee045.chunk.js.map